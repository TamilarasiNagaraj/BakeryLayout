<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bakery Website</title>

<!-- Poppins Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<link rel="stylesheet" href="buy.css">
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ---------- TOP BAR ---------- -->
<div class="top-bar">
    <p>Free Deliver Above<span class="call"> 999</span> </p>
    <p>Get <span class="call">25</span>%Off for first order</p>
   <p class="call call-blink">Call-123-456-789</p>
</div>

<!-- ---------- NAVBAR ---------- -->
<nav class="navbar">

    <!-- Logo -->
   <div class="logo-circle">
    <span>Bakery</span>
</div>

    <!-- Search Box -->
     <div class="search-box">
  <input type="text" id="searchInput" placeholder="Search product">
  <i class="fa fa-search" id="searchIcon"></i>
</div>

       <div class="nav-icons">
        <img src="Images/pexels-cristian-rojas-8446838.png" class="profile-img"  id="profileIcon">
<div class="dropdown" id="dropdownMenu">
          <div class="dropdown-header">My Accounts</div>
          <a href="myprof.html">Personal Information</a>
          <a href="invoice.html">My Order</a>
          <a href="track.html">Tracking Order</a>
          <a href="password.html">Password Manager</a>
          <a href="logout.html">Logout</a>
        </div>
        <i class="fa-regular fa-heart" onclick="window.location.href='whishlist.html'"></i>
        <i class="fa-solid fa-cart-shopping" onclick="window.location.href='buy.html'"></i>
        <i class="fa-regular fa-bell" onclick="window.location.href='home.html'"></i>
    </div>
</nav>

<!-- ---------- MENU LINKS ---------- -->
<div class="menu-links">
    <a href="home.html" >Home</a>
    <a href="shop.html">Shop</a>
    <a href="category.html">Categories</a>
    <a href="gallery.html">Gallery</a>
    <a href="blog.html" >Blog</a>
    <a href="contact.html">Contact us</a>
</div>
<!-- ===== PRODUCT TABLE ===== -->
<section class="cart-table-section">
  <div class="table-header-row">
    <div>Product</div>
    <div>Names</div>
    <div>Quantity</div>
  </div>

  <div class="table-body-row">
    <div><img class="row-img" src="" id="rowProductImg"></div>
    <div id="rowProductTitle"></div>
    <div class="table-qty">
      <button onclick="changeQty(-1)">-</button>
      <span id="tableQtyCount">1</span>
      <button onclick="changeQty(1)">+</button>
    </div>
    <div class="row-price">₹<span id="rowProductPrice"></span></div>
  </div>
</section>

<!-- ===== COUPON + APPLY + CLEAR CART (Same Line) ===== -->


<!-- ===== ORDER SUMMARY ===== -->
<section class="order-summary-section">
  <div class="order-summary-box">
    <h3>Order Summary</h3>
    <div class="summary-row"><span>Items</span><span id="summaryItems">1</span></div>
    <div class="summary-row"><span>Subtotal</span><span>₹<span id="summarySubtotal">850</span></span></div>
    <div class="summary-row"><span>Shipping</span><span>₹0.00</span></div>
    <div class="summary-row"><span>Taxes</span><span>₹0.00</span></div>
    <div class="summary-row"><span>Coupon Discount</span><span>-₹<span id="summaryCouponDiscount">0</span></span></div>
    <div class="summary-row total"><span>Total</span><span>₹<span id="summaryTotal"></span></span></div>
    <button class="checkout-btn" onclick="goCheckout()">Proceed to Checkout</button>
  </div>
  
  <section class="coupon-clean-row">
  <input type="text" placeholder="Coupon code" class="coupon-input" id="couponInput">
  <button class="apply-coupon-btn" onclick="applyCoupon()">Apply Coupon</button>
  
 <div class="clear-cart-wrapper">
  <a href="#" class="clean-text" onclick="clearCart()">Clear Shopping Cart</a>

  <div class="clean-line">
    <div class="dark-dot"></div>  <!-- Start Dot -->
    <div class="line"></div>      <!-- Center Line -->
    <div class="dark-dot"></div>  <!-- End Dot -->
  </div>
</div>
</section>
</section>

<footer class="footer">

    <div class="footer-main">

        <!-- Left Logo -->
          <div class="logo-circle1">
    <span>Bakery</span>
</div>
        <!-- Right Side Columns -->
        <div class="footer-right">

            <div class="footer-col">
                <p>Customer service</p>
                <p>My Account</p>
                <p>Checkup</p>
                <p>FAQ</p>
                <p>Return</p>
            </div>

            <div class="footer-col">
                <p>Company</p>
                <p>About us</p>
                <p>Blogs</p>
                <p>Contact us</p>
                <p>Career</p>
            </div>

            <div class="footer-col">
                <p>Our information</p>
                <p>Privacy</p>
                <p>Terms & Condition</p>
                <p>Customer Feed back</p>
            </div>

            <div class="footer-col contact">
                <p>Mobile: 123-456-789</p>
                <p>Email_Bakery@gmail.com</p>
                <p>Address : 12,,north city-001</p>

                <div class="footer-social">
                    <i class="fa-brands fa-whatsapp"></i>
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-instagram"></i>
                </div>
            </div>

        </div>

    </div>

    <!-- Bottom -->
    <div class="footer-bottom">
        <p>© 2025 Bakery. co. All rights reserved.</p>
        <p><strong>Terms & Conditions | Privacy Policy</strong></p>
    </div>

</footer>
<script>
// -------- LOAD BUY NOW ITEM -----------
let item = JSON.parse(localStorage.getItem("buyNowItem")) || null;
let qty = 1;
let couponDiscount = 0;

if (item) {
  // if we already stored qty / coupon before, use them
  qty = item.qty || 1;
  couponDiscount = item.coupon || 0;

  // product info
  document.getElementById("rowProductImg").src = item.img;
  document.getElementById("rowProductTitle").innerText = item.title;
  document.getElementById("rowProductPrice").innerText = item.price;

  // initial UI
  document.getElementById("tableQtyCount").innerText = qty;
  updateSummary();
}

// save current values back to localStorage
function saveItem() {
  if (!item) return;
  item.qty = qty;
  item.coupon = couponDiscount;
  localStorage.setItem("buyNowItem", JSON.stringify(item));
}

// -------- QUANTITY CHANGE -----------
function changeQty(v) {
  if (!item) return;

  qty += v;
  if (qty < 1) qty = 1;

  document.getElementById("tableQtyCount").innerText = qty;
  updateSummary();
  saveItem();  // ✅ store new qty
}

// -------- UPDATE ORDER SUMMARY ----------
function updateSummary() {
  if (!item) return;

  let subtotal = item.price * qty;
  let total = subtotal - couponDiscount;

  document.getElementById("summaryItems").innerText = qty;
  document.getElementById("summarySubtotal").innerText = subtotal;
  document.getElementById("summaryCouponDiscount").innerText = couponDiscount;
  document.getElementById("summaryTotal").innerText = total;
}

// -------- APPLY COUPON ----------
function applyCoupon() {
  if (!item) return;

  let code = document.getElementById("couponInput").value.trim();

  if (code === "FIRST25") {
    couponDiscount = 150;
  } else if (code !== "") {
    couponDiscount = 50;
    alert("Coupon Applied ✅");
  } else {
    couponDiscount = 0;
  }

  updateSummary();
  saveItem();   // ✅ store coupon value
}

// -------- CLEAR CART ----------
function clearCart() {
  localStorage.removeItem("buyNowItem");
  localStorage.removeItem("bakeryCart");
  alert("Cart Cleared ✅");
  window.location.reload();
}

// -------- GO TO CHECKOUT ----------
function goCheckout() {
  if (item) {
    saveItem();   // ✅ make sure latest qty & coupon are saved
    window.location.href = "proceedtopay.html";
  } else {
    alert("No item found for checkout!");
  }
}


const profilePic = document.getElementById("profileIcon");
    const dropdownMenu = document.getElementById("dropdownMenu");

    // Toggle dropdown on profile pic click
    profilePic.addEventListener("click", (e) => {
      e.stopPropagation(); // prevent event bubbling
      dropdownMenu.classList.toggle("active");
    });

    // Close dropdown when clicking anywhere else
    document.addEventListener("click", (e) => {
      if (!dropdownMenu.contains(e.target) && e.target !== profilePic) {
        dropdownMenu.classList.remove("active");
      }
    });
document.getElementById("searchIcon").addEventListener("click", function () {
  let text = document.getElementById("searchInput").value.trim().toLowerCase();

  if (text === "cake menu section") {
    window.location.href = "shop.html";
  } else if (text === "birthday cake section") {
    window.location.href = "shopcate.html";
  } else if (text === "shop categories") {
    window.location.href = "shopcate.html";
  } else if (text === "cake menu section") {
    window.location.href = "search.html";
  }else if (text === "shopcate.html"){
    window.location.href = "whishlist.html";}
  else {
    alert("No page matched ❗ Try again");
  }
});
</script>

</body>
</html>